---
title: 모던 자바 인 액션 - 12장 새로운 날짜와 시간 API 
description: 모던 자바 인 액션 - 12장 새로운 날짜와 시간 API
categories:
 - dev
tags:
 - java
comments: true
---
> Modern Java In Action 정리 - 새로운 날짜와 시간 API

  * Java 8에서 새로운 날짜와 시간 라이브러리를 제공하는 이유
  * 사람이나 기계가 이해할 수 있는 날짜와 시간 표현 방법
  * 시간의 양 정의하기
  * 날짜 조작, 포매팅, 파싱
  * 시간대와 캘린더 다루기

`모던 자바 인 액션 책을 보고 정리한 글입니다.` 

작성중인 글입니다. 

## LocalDate, LocalTime, Instant, Duration, Period 클래스
* LocalDate, LocalTime, Instant, Duration, Period를 활용하여 간단한 날짜와 시간 간격을 정의해보자.

### LocalDate와 LocalTime 사용
* LocalDate 인스턴스는 시간을 제외한 날짜를 표현하는 불변객체이다. 
* LocalDate 객체는 어떤 시간대 정보도 포함하지 않는다. 
* 정적 팩토리 메소드 of를 활용하여 LocalDate 인스턴스를 만들 수 있다. 
* 팩토리 메소드 now()는 시스템 시계의 정보를 이용해 현재 날짜 정보를 얻는다.

```java
LocalDate date = LocalDate.of(2017, 9, 21)
date.getYear()
...
```

* 시간대를 포함한 클래스는 LocalTime을 사용한다. 

```java
LocalTime time = LocalTime.of(13, 45, 20) // 13:45:20
time.getHour()
...
```

* 날짜와 시간 문자열로 LocalDate와 LocalTime의 인스턴스를 만드는 방법도 있다. 

```java
LocalDate date = LocalDate.parse("2017-09-21")
LocalTime time = LocalTime.parse("13:45:20")
```

* parse 메서드에 DateTimeFormatter를 전달할 수 있다. 

### 날짜와 시간 조합
* LocalDateTime은 LocalDate와 LocalTime을 갖는다. 
* LocalDateTime은 날짜와 시간을 모두 표현할 수 있다. 

```java
LocalDateTime dt1 = LocalDateTime.of(2017, Month.SEPTEMBER, 21, 13, 45, 20);
LocalDateTime dt2 = LocalDateTime.of(date, time);
```

### Instant 클래스 : 기계의 날짜와 시간
* Instant 클래스는 유닉스 에포크 시간을 기준으로 특정 지점까지의 시간을 초로 표현한다. 
* 팩토리 메서드 ofEpochSecond에 초를 넘겨줘서 Instant 클래스 인스턴스를 만들 수 있다. 
* Instant 클래스는 나노초의 정밀도를 제공한다. 

### Duration과 Period 정의
* Temporal 인터스페이스는 특정 시간을 모델링하는 객체의 값을 어떻게 읽고 조작할지 정의한다. 
* Duration클래스는 between으로 두시간 객체 사이의 지속시간을 만들수 있다. 

```java
Duration d1 = Duration.between(time1, time2);
Duration d1 = Duration.between(dateTime1, dateTime2);
Duration d1 = Duration.between(instant1, instant2);
```

* LocalDateTime은 사람이 사용하도록, Instant는 기계가 사용하도록 만들어졌다. 
* Period 클래스의 팩토리 메서드 between을 이용하면 두 LocalDate의 차이를 확인할 수 있다. 

```java
Period tenDays = Period.between(LocalDate.of(2017, 9, 11), LocalDate.of(2017, 9, 21));
```

* Duration과 Period 클래스는 자신의 인스턴스를 만들 수 있도록 다양한 팩토리 메서드를 제공한다.

```java
Duration threeMinutes = Duration.ofMinutes(3);
Duration threeMinutes = Duration.of(3, ChronoUnit.MINUTES);

Period tenDays = Period.ofDays(10);
Period threeWeeks = Period.ofWeeks(3);
```

* 지금까지 살펴본 모든 클래스는 불변이다. 불변 클래스는 함수형 프로그래밍과 스레드 세이프하여 도메인 모델의 일관성을 유지하는데 좋은 특성이다. 
* 새로운 날짜와 시간 API에서는 변경된 객체 버전을 만들 수 있는 메서드를 제공한다. 

## 날짜 조정, 파싱, 포메팅
* withAttribte 메서드로 기존의 LocalDate를 바꾼 버전을 직접 간단히 만들 수 있다. 
* 모든 메서드는 기존 객체를 변경하지 않는다.

```java
//절대적인 방식으로 LocalDate의 속성 바꾸기
LocalDate date1 = LocalDate.of(2017, 9, 21); // 2017-09-21
LocalDate date2 = date1.withYear(2011); // 2011-09-21
LocalDate date3 = date2.withDayOfMonth(25); // 2011-09-25
LocalDate date4 = date3.with(ChronoField.MONTH_OF_YEAR, 2); // 2011-02-25
```

* 마지막 행에서 보여주는 것처럼 첫 번째 인수로 TemporalField를 갖는 메서드를 사용하면 조금더 범용적으로 날짜를 변경할 수 있다.
* 선언형으로 LocalDate를 사용하는 방법도 존재한다.

```java
LocalDate date1 = LocalDate.of(2017, 9, 21); // 2017-09-21
LocalDate date2 = date1.plusWeek(1); // 2017-09-28
LocalDate date3 = date2.minusYear(6); // 2011-09-28
LocalDate date4 = date3.plus(6, ChronoUnit.MONTHS); // 2012-03-28
```