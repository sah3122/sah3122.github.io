
<!doctype html>














<html class="theme-next muse use-motion" lang="ko">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/assets/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/assets/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/assets/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Java,Spring," />





  <link rel="alternate" href="/atom.xml" title="천천히 걷는 방법" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?v=5.1.1" />
















<meta name="description" content="백기선님 강의 스프링 부트 개념과 활용 정리 노트">
<meta name="keywords" content="Java, Spring">
<meta property="og:type" content="article">
<meta property="og:title" content="스프링 부트 정리">
<meta property="og:url" content="http://localhost:4000/dev/2020/06/09/spring-boot/">
<meta property="og:site_name" content="천천히 걷는 방법">
<meta property="og:description" content="백기선님 강의 스프링 부트 개념과 활용 정리 노트">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="스프링 부트 정리">
<meta name="twitter:description" content="백기선님 강의 스프링 부트 개념과 활용 정리 노트">


<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"hide","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '작성자'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://localhost:4000/"/>





  <title>스프링 부트 정리 | 천천히 걷는 방법</title>
  
















</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="ko">

  
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">천천히 걷는 방법</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">적당히 잘하는 개발자가 되기 위한 기록 저장소</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            홈
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            아카이브
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            태그
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

<div id="posts" class="posts-expand">
  
  

  

  
  
  

  <article class="post post-type- " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://localhost:4000/dev/2020/06/09/spring-boot/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="DongChul Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="assets/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="천천히 걷는 방법">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
          
          
            스프링 부트 정리
          
        </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">작성일</span>
              
              <time title="" itemprop="dateCreated datePublished" datetime="2020-06-09T00:00:00+09:00">
                2020-06-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/category/#/dev" itemprop="url" rel="index">
                    <span itemprop="name">dev</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
            
                <div class="post-description">
                    백기선님 강의 스프링 부트 개념과 활용 정리 노트
                </div>
            
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
  
  












  <blockquote>
  <p>백기선님 강의 스프링 부트 개념과 활용 정리 노트
강의 내용을 다시한번 복습하기 위하여 정리합니다.</p>
</blockquote>

<p>스프링 부트란 독립적이며, 프로덕션 레벨의 스프링 기반 어플리케이션을 간편하게 만들수 있게 도와주는 툴입니다.</p>

<h2 id="스프링-부트-원리">스프링 부트 원리</h2>

<ul>
  <li>의존성 관리 이해
    <ul>
      <li>스프링 부트에서는 자동으로 의존성을 관리 해준다.</li>
      <li>일반적으로 spring-boot-stater-parent에 정의되어 있는 라이브러리는 버전을 명시하지 않아도 현재 사용하는 스프링 부트 버전에 맞게 자동으로 버전을 찾아 적용한다.</li>
      <li>parent에 등록되지 않은 라이브러리를 사용할 때는 버전을 명시해줘야 한다.</li>
      <li>특정 버전을 사용하고 싶을땐 버전을 명시한게 우선순위를 가지게 된다.</li>
    </ul>
  </li>
  <li>의존성 관리 응용
    <ul>
      <li>의존성 추가
        <ul>
          <li>스프링 부트가 관리 해주지않는 라이브러리는 버전을 명시해주는것이 좋다.</li>
        </ul>
      </li>
      <li>의존성 변경
        <ul>
          <li>스프링 부트가 관리해주는 버전도 변경 할 수 있다.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>자동 설정 이해
    <ul>
      <li>@EnableAutoConfiguration (@SpringBootApplication 안에 포함되어 있다.)
        <ul>
          <li>autoconfiguration 으로 등록된 bean 은 component scan으로 등록하는 bean을 덮어 쓴다.</li>
          <li>ConditionalOnMissingBean - 빈이 등록 되어 있지 않을때 빈 등록함.</li>
          <li>component scan -&gt; autoConfiguration 순으로</li>
        </ul>
      </li>
      <li>Spring Bean은 사실 두 단계로 나눠서 생성된다.
        <ul>
          <li>1단계 : @ComponentScan</li>
          <li>2단계 : @EnableAutoConfiguration</li>
        </ul>
      </li>
      <li>@ComponentScan
        <ul>
          <li>@Component</li>
          <li>@Configuration @Repository @Service @Controller @RestController</li>
        </ul>
      </li>
      <li>EnableAutoConfiguration
        <ul>
          <li>spring.factories
            <ul>
              <li>org.springframework.boot.autoconfigure.EnableAutoConfiguration</li>
            </ul>
          </li>
          <li>@Configuration</li>
          <li>@ConditionalOnXxxYyyZzz</li>
        </ul>
      </li>
      <li>@SpringBootApplication 은 아래 3가지 애노테이션을 포함 하고 있다.
        <ul>
          <li>@SpringBootConfiguration</li>
          <li>@EnableAutoConfiguration</li>
          <li>@ComponentScan</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>내장 서블릿 컨테이너
    <ul>
      <li>스프링 부트는 서버가 아니다</li>
      <li>포트 설정 가능</li>
      <li>톰캣에 컨텍스트 추가</li>
      <li>서블릿 만들기</li>
      <li>톰캣에 서블릿 추가</li>
      <li>컨텍스트에 서블릿 매핑</li>
      <li>톰캣 실행 및 대기</li>
      <li>이 모든 과정을 보다 상세히, 유연하게 설정하고 실행해주는게 바로 스프링 부트의 자동설정
        <ul>
          <li>Step 1 : ServletWebServerFactoryAutoConfiguration (서블릿 웹 서버 생성)
            <ul>
              <li>TomcatServletWebServerFactoryCustomizer (서버 커스터마이징)</li>
            </ul>
          </li>
          <li>Step 2 : DispatcherServletAutoConfiguration
            <ul>
              <li>서블릿 만들고 등록</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>내장 웹 서버 응용 1부 : 컨테이너와 서버 포트
    <ul>
      <li>다른 서블릿 컨테이너로 변경
        <ul>
          <li>boot-starter에 포함된 tomcat 의존성 제외</li>
          <li>undertow, jetty … 의존성 추가</li>
        </ul>
      </li>
      <li>웹 서버 사용하지 않기
        <ul>
          <li>properties에 application-type 추가</li>
        </ul>
      </li>
      <li>포트 변경</li>
    </ul>
  </li>
  <li>내장 웹 서버 응용 2부 : https 와 http2
    <ul>
      <li>HTTPS 설정하기
        <ul>
          <li>키스토어 만들기
            <ul>
              <li>https://gist.github.com/keesun/f93f0b83d7232137283450e08a53c4fd</li>
            </ul>
          </li>
          <li>HTTP는 사용못함 ?
            <ul>
              <li>기본적으로 http 커넥터는 1개라 https설정을 하게 되면 http를 사용하지 못한다.</li>
              <li>Connector를 따로 등록 해 주어야 한다.
```java
  /**
                <ul>
                  <li>https와 http를 사용하기 위해 connector 등록.
  *
  */
  @Bean
  public ServletWebServerFactory serverFactory() {
  TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();
  tomcat.addAdditionalTomcatConnectors(createStandardConnector());
  return tomcat;
  }</li>
                </ul>

                <p>private Connector createStandardConnector() {
      Connector connector = new Connector(“org.apache/.coyote.http11.Http11NioProtocol”);
      connector.setPort(8080);
      return createStandardConnector();
  }
```</p>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>HTTP2
        <ul>
          <li>SSL은 기본적으로 적용되어 있어야 함</li>
          <li>undertow는 별다른 설정 없이 properties로 설정 가능</li>
          <li>tomcat은 8.5 버전 이하에선 설정할 것들이 많아 권장하지 않음</li>
          <li>tomcat 9 &amp; java 9 이상부터 사용 권장</li>
        </ul>
      </li>
      <li>톰캣 HTTP2
        <ul>
          <li>JDK9와 Tomcat 9+ cncjs</li>
          <li>링크 참조
            <ul>
              <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto-embedded-web-servers">링크</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>독립적으로 실행 가능한 JAR
        <ul>
          <li>mvn package -&gt; 독립적으로 실행 가능한 JAR 파일 하나가 생성됨</li>
          <li>spring-maven-plugin이 해주는 일 (패키징)</li>
          <li>과거 “uber” jar 사용
            <ul>
              <li>모든 클래스 (의존성 및 애플리케이션)을 하나로 압축하는 방법</li>
              <li>뭐가 어디에서 온건지 알 수 없음
                <ul>
                  <li>무슨 라이브러리를 사용한건지</li>
                </ul>
              </li>
              <li>내용은 다르지만 이름이 같은 파일이 또 어떻게 ?</li>
            </ul>
          </li>
          <li>스프링 부트의 전략
            <ul>
              <li>내장 JAR : 기본적으로 자바에는 내장 JAR를 로딩하는 표준적인 방법이 없음</li>
              <li>애플리케이션 클래스와 라이브러리 위치 구분</li>
              <li>org.springframework.boot.loader.jar.JarFile을 사용해서 내장 JAR 를 읽는다.</li>
              <li>org.springframework.boot.loader.Launcher를 사용해서 실행한다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="스프링-부트-활용">스프링 부트 활용</h2>
<ul>
  <li>스프링 부트 활용 소개
    <ul>
      <li>스프링 부트 핵심 기능
        <ul>
          <li>SpringApplication</li>
          <li>외부 설정</li>
          <li>프로파일</li>
          <li>로깅</li>
          <li>테스트</li>
          <li>Spring-Dev-Tools</li>
        </ul>
      </li>
      <li>각종 기술 연동
        <ul>
          <li>스프링 웹 MVC</li>
          <li>스프링 데이터</li>
          <li>스프링 시큐리티</li>
          <li>REST API 클라이언트</li>
          <li>…</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>SpringApplication
    <ul>
      <li>기본 로그 레벨 : INFO</li>
      <li>FailureAnalyzer</li>
      <li>배너
        <ul>
          <li><code class="highlighter-rouge">banner.txt | gif | jpg</code></li>
          <li>classpath 또는 spring.banner.location</li>
          <li>${spring-booot.version} 등의 변수를 사용할 수 있음</li>
          <li>Banner 클래스를 구현 후 SpringApplication.setBanner() 등으로 설정 가능</li>
        </ul>
      </li>
      <li>SpringApplicationBuilder로 빌터 패턴 사용 가능.
        <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4</pre></td><td class="code"><pre class="highlight"><code>  <span class="c1">//SpringApplication.run(SpringBootGetStartApplication.class, args);</span>
  <span class="k">new</span> <span class="nf">SpringApplicationBuilder</span><span class="o">()</span>
          <span class="o">.</span><span class="na">sources</span><span class="o">(</span><span class="n">SpringBootGetStartApplication</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
          <span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
</code></pre></td></tr></tbody></table></div>        </div>
      </li>
      <li>ApplicationEvent 등록
        <ul>
          <li>ApplicationContext를 만들기 전에 사용하는 리스너는 Bean을 등록할 수 없다.
            <ul>
              <li>SpringApplication.addListeners()
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19</pre></td><td class="code"><pre class="highlight"><code>  <span class="c1">// applicationStartingEvent 는 application context 생성 전에 발생하기 때문에 이렇게 등록 해줘야 한다,</span>
  <span class="n">SpringApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpringApplication</span><span class="o">(</span><span class="n">SpringBootGetStartApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
  <span class="n">app</span><span class="o">.</span><span class="na">addListeners</span><span class="o">(</span><span class="k">new</span> <span class="n">SampleListener</span><span class="o">());</span>

  <span class="nd">@Component</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleListener</span> <span class="kd">implements</span> <span class="n">ApplicationListener</span><span class="o">&lt;</span><span class="n">ApplicationStartedEvent</span><span class="o">&gt;</span> <span class="o">{</span>
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="n">ApplicationStartedEvent</span> <span class="n">ApplicationStartedEvent</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Application is Startied"</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>

  <span class="nd">@Component</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleListener</span> <span class="kd">implements</span> <span class="n">ApplicationListener</span><span class="o">&lt;</span><span class="n">ApplicationStartingEvent</span><span class="o">&gt;</span> 
      <span class="nd">@Override</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onApplicationEvent</span><span class="o">(</span><span class="n">ApplicationStartingEvent</span> <span class="n">applicationStartingEvent</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Application is Starting"</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>WebApplication Type 설정
        <ul>
          <li>WebApplicationType
            <ul>
              <li>NONE : 서블릿과 Webflux가 없을때</li>
              <li>SERVLET : Servlet</li>
              <li>REACTIVE : WebFlux
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3</pre></td><td class="code"><pre class="highlight"><code><span class="n">SpringApplication</span> <span class="n">app</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SpringApplication</span><span class="o">(</span><span class="n">SpringBootGetStartApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="n">app</span><span class="o">.</span><span class="na">setWebApplicationType</span><span class="o">(</span><span class="n">WebApplicationType</span><span class="o">.</span><span class="na">NONE</span><span class="o">);</span>
<span class="n">app</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">args</span><span class="o">);</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>애플리케이션 아규먼트 사용하기
        <ul>
          <li>-D는 JVM 옵션</li>
          <li>–Application Arguments</li>
          <li>ApplicationArguments를 빈으로 등록해주니깐 가져다 사용하면 된다.</li>
        </ul>
      </li>
      <li>애플리케이션 실행한 뒤 뭔가 다른 작업을 하고 싶을 경우
        <ul>
          <li>ApplicationRunner(추천) 또는 CommandLineRunner</li>
          <li>순서 지정 기능 @Order</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>외부 설정
    <ul>
      <li>properties</li>
      <li>yaml</li>
      <li>환경 변수</li>
      <li>커맨드 라인 아규먼트</li>
      <li>프로퍼티 우선순위
        <ol>
          <li>유저 홈 디렉토리에 있는 spring-boot-dev-tools.properties</li>
          <li>테스트에 있는 @TestPropertySource
            <ul>
              <li>@TestPropertySource(locations = “classpath:/test.properties”)</li>
            </ul>
          </li>
          <li>@SpringBootTest 애노테이션의 properties 애트리뷰트
            <ul>
              <li>@SpringBootTest(properties = “dongchul.name=dong2”)</li>
            </ul>
          </li>
          <li>커맨드 라인 아규먼트</li>
          <li>SPRING_APPLICATION_JSON (환경 변수 또는 시스템 프로티) 에 들어있는 프로퍼티</li>
          <li>ServletConfig 파라미터</li>
          <li>ServletContext 파라미터</li>
          <li>java:comp/env JNDI 애트리뷰트</li>
          <li>System.getProperties() 자바 시스템 프로퍼티</li>
          <li>OS 환경 변수</li>
          <li>RandomValuePropertySource</li>
          <li>JAR 밖에 있는 특정 프로파일용 application properties</li>
          <li>JAR 안에 있는 특정 프로파일용 application properties</li>
          <li>JAR 밖에 있는 application properties</li>
          <li>JAR 안에 있는 application properties</li>
          <li>@PropertySource</li>
          <li>기본 프로퍼티 (SpringApplication.setDefaultProperties)</li>
        </ol>
      </li>
      <li>application.properties 우선순위
        <ol>
          <li>file:./config/</li>
          <li>file:./</li>
          <li>classpath:/config/</li>
          <li>classpath:/</li>
        </ol>
      </li>
      <li>랜덤 값 설정하기
        <ul>
          <li>${random.*}</li>
        </ul>
      </li>
      <li>플레이스 홀더
        <ul>
          <li>name = dongchul</li>
          <li>fullName = ${name} lee</li>
        </ul>
      </li>
      <li>타입 - 세이프 프로퍼티 @ConfigurationProperties
        <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14</pre></td><td class="code"><pre class="highlight"><code>  <span class="nd">@Component</span>
  <span class="nd">@ConfigurationProperties</span><span class="o">(</span><span class="s">"dongchul"</span><span class="o">)</span>
  <span class="nd">@Validated</span> <span class="c1">// 프로퍼티 값을 검증 하기 위해 사용</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">DonghculProperties</span> <span class="o">{</span>

      <span class="nd">@NotEmpty</span>
      <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

      <span class="nd">@Size</span><span class="o">(</span><span class="n">min</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span><span class="n">max</span> <span class="o">=</span> <span class="mi">100</span><span class="o">)</span>
      <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span><span class="o">;</span>

      <span class="kd">private</span> <span class="n">String</span> <span class="n">fullName</span><span class="o">;</span>
      <span class="o">...</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>        </div>
        <ul>
          <li>여러 프로퍼티를 묶어서 읽어올 수 있음.</li>
          <li>빈으로 등록해서 다른 빈에 주입 할 수 있음
            <ul>
              <li>@EnableConfigurtionProperties</li>
              <li>@Component</li>
              <li>@Bean</li>
            </ul>
          </li>
          <li>융통성 있는 바인딩
            <ul>
              <li>context-path (kebab)</li>
              <li>context_path (under score)</li>
              <li>contextPath (camel)</li>
              <li>CONTEXTPATH</li>
            </ul>
          </li>
          <li>프로퍼티 타입 컨버전
            <ul>
              <li>@DurationUnit</li>
            </ul>
          </li>
          <li>프로퍼티 값 검증
            <ul>
              <li>@Validated</li>
              <li>JSR-303(@NotNull, …)</li>
            </ul>
          </li>
          <li>메타 정보 생성</li>
          <li>@Value
            <ul>
              <li>SpEL을 사용할수 있지만 위 기능들을 전부 사용하지 못한다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>프로파일
    <ul>
      <li>@Profile 애노테이션은 어디에서 사용하는가 ?
        <ul>
          <li>@Configuration</li>
          <li>@Component</li>
        </ul>
      </li>
      <li>어떤 프로파일을 활성화 할 것인가 ?
        <ul>
          <li>spring.profiles.active</li>
        </ul>
      </li>
      <li>어떤 프로파일을 추가할 것인가 ?
        <ul>
          <li>spring.profiles.include</li>
        </ul>
      </li>
      <li>프로파일용 프로퍼티
        <ul>
          <li>application-{profile}.properties / yml</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>로깅
    <ul>
      <li>로깅 퍼사드 vs 로거
        <ul>
          <li>Commons Logging, SLF4j</li>
          <li>JUL, Log4J2, LogBack</li>
        </ul>
      </li>
      <li>스프링 5에 로거 관련 변경 사항
        <ul>
          <li><a href="https://docs.spring.io/spring/docs/5.0.0.RC3/spring-framework-reference/overview.html#overview-logging">https://docs.spring.io/spring/docs/5.0.0.RC3/spring-framework-reference/overview.html#overview-logging</a></li>
          <li>Spring-JCL
            <ul>
              <li>Commons Logging -&gt; SLF4j or Log4j2</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>스프링 부트 로깅
        <ul>
          <li>기본 포멧</li>
          <li>–debug (일부 핵심 라이브러리만 디버깅 모드 설정)</li>
          <li>–trace (전부 다 디버깅 모드 설정)</li>
          <li>컬러 출력 : spring.output.ansi.enabled</li>
          <li>파일 출력 : logging.file 또는 logging.path</li>
          <li>로그 레벨 조정 : logging.level.패키지 = 로그레벨</li>
        </ul>
      </li>
      <li>커스텀 로그 설정 파일 사용하기
        <ul>
          <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html</a></li>
          <li>Logback : logback-spring.xml (추천, logback.xml보다 더 많은 기능을 사용할 수 있다.)
            <div class="language-xml highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5</pre></td><td class="code"><pre class="highlight"><code>  <span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
      <span class="nt">&lt;include</span> <span class="na">resource=</span><span class="s">"org/springframework/boot/logging/logback/base.xml"</span><span class="nt">/&gt;</span>
      <span class="nt">&lt;logger</span> <span class="na">name=</span><span class="s">"me.study"</span> <span class="na">level=</span><span class="s">"DEBUG"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>
</code></pre></td></tr></tbody></table></div>            </div>
          </li>
          <li>Log4J2 : log4j2-spring.xml</li>
          <li>JUL (비추) : logging.properties</li>
          <li>Logback extention
            <ul>
              <li>프로파일 <code class="highlighter-rouge">&lt;springProfile name="프로파일"&gt;</code></li>
              <li>Environment 프로퍼티 <code class="highlighter-rouge">&lt;springProperty&gt;</code></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>로거를 Log4j2로 변경하기
        <ul>
          <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-configure-log4j-for-logging">https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-configure-log4j-for-logging</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>테스트
    <ul>
      <li>시작은 spring-boot-starter-test를 추가하는것 부터
        <ul>
          <li>test scope로 추가</li>
        </ul>
      </li>
      <li>@SpringBootTest - 통합 테스트용
        <ul>
          <li>@RunWith(SpringRunner.class)랑 같이 써야함 - (Junit5 부터는 생략 가능하다.)</li>
          <li>빈 설정 파일은 설정을 안해주나 ? 알아서 찾는다. (@SpringBootApplication)</li>
          <li>WebEnvironment
            <ul>
              <li>MOCK : mock servlet environment : 내장 톰캣 구동 안함.</li>
              <li>RANDOM_PORT, DEFINED_PORT : 내장 톰캣 사용 함</li>
              <li>NONE : 서블릿 환경 제공 안함</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>@MockBean
        <ul>
          <li>ApplicaionContext에 들어있는 빈을 Mock으로 만든 객체로 교체 함</li>
          <li>모든 @Test 마다 자동으로 리셋</li>
        </ul>
      </li>
      <li>슬라이스 테스트
        <ul>
          <li>레이어 별로 잘라서 테스트하고 싶을떄</li>
          <li>@JsonTest</li>
          <li>@WebMvcTest</li>
          <li>@WebFluxTest</li>
          <li>@DataJpaTest</li>
          <li>…</li>
        </ul>
      </li>
      <li>테스트 유틸
        <ul>
          <li>OutputCapture (log 및 stdout 관련 테스트)</li>
          <li>TestPropertyValues</li>
          <li>TestRestTemplate</li>
          <li>ConfigFileApplicationContextInitailizer</li>
        </ul>
      </li>
    </ul>

    <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19<br/>20<br/>21<br/>22<br/>23<br/>24<br/>25<br/>26<br/>27<br/>28<br/>29<br/>30<br/>31<br/>32<br/>33<br/>34<br/>35<br/>36<br/>37<br/>38<br/>39<br/>40<br/>41<br/>42<br/>43<br/>44<br/>45<br/>46<br/>47<br/>48<br/>49<br/>50</pre></td><td class="code"><pre class="highlight"><code>  <span class="cm">/**
  *
  * @SpringBootTest
  * 통합 테스트용
  *
  * @WebMvcTest(SampleContorller.class)
  * 슬라이싱 테스트용
  * 선언한 Controller 관련된 Bean 만 생성 하기 때문에
  * Service ,Repository 같은 Bean 들은 모킹 해야 한다.
  */</span>
  <span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="c1">//@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK) // 기본값</span>
  <span class="nd">@SpringBootTest</span><span class="o">(</span><span class="n">webEnvironment</span> <span class="o">=</span> <span class="n">SpringBootTest</span><span class="o">.</span><span class="na">WebEnvironment</span><span class="o">.</span><span class="na">RANDOM_PORT</span><span class="o">)</span> <span class="c1">// 실제로 서버가 구동됨. rest template 로 확인 해야함.</span>
  <span class="nd">@AutoConfigureMockMvc</span> <span class="c1">// mock mvc를 사용 하기 위함</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">SampleControllerTest</span> <span class="o">{</span>
      <span class="c1">// async client test for webflux</span>
      <span class="c1">// webflux의존성을 가지고 있어야 사용 가능.</span>
      <span class="nd">@Autowired</span>
      <span class="n">WebTestClient</span> <span class="n">webTestClient</span><span class="o">;</span>

      <span class="nd">@Autowired</span>
      <span class="n">MockMvc</span> <span class="n">mockMvc</span><span class="o">;</span>

      <span class="nd">@Autowired</span>
      <span class="n">TestRestTemplate</span> <span class="n">testRestTemplate</span><span class="o">;</span>

      <span class="nd">@MockBean</span> <span class="c1">//컨트롤러 테스트를 위해 모킹.</span>
      <span class="n">SampleService</span> <span class="n">mockSampleService</span><span class="o">;</span>

      <span class="nd">@Test</span>
      <span class="kd">public</span> <span class="kt">void</span> <span class="nf">hello</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
          <span class="c1">// sample service 를 mocking</span>
          <span class="n">when</span><span class="o">(</span><span class="n">mockSampleService</span><span class="o">.</span><span class="na">getName</span><span class="o">()).</span><span class="na">thenReturn</span><span class="o">(</span><span class="s">"dongchul"</span><span class="o">);</span>

          <span class="n">mockMvc</span><span class="o">.</span><span class="na">perform</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">))</span>
                  <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">status</span><span class="o">().</span><span class="na">isOk</span><span class="o">())</span>
                  <span class="o">.</span><span class="na">andExpect</span><span class="o">(</span><span class="n">content</span><span class="o">().</span><span class="na">string</span><span class="o">(</span><span class="s">"hello dongchul"</span><span class="o">))</span>
                  <span class="o">.</span><span class="na">andDo</span><span class="o">(</span><span class="n">print</span><span class="o">());</span>

          <span class="n">String</span> <span class="n">result</span> <span class="o">=</span> <span class="n">testRestTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
          <span class="n">assertEquals</span><span class="o">(</span><span class="n">result</span><span class="o">,</span> <span class="s">"hello dongchul"</span><span class="o">);</span>

          <span class="n">webTestClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">exchange</span><span class="o">()</span>
                  <span class="o">.</span><span class="na">expectStatus</span><span class="o">()</span>
                  <span class="o">.</span><span class="na">isOk</span><span class="o">()</span>
                  <span class="o">.</span><span class="na">expectBody</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
                  <span class="o">.</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"hello dongchul"</span><span class="o">);</span>
      <span class="o">}</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>    </div>
  </li>
  <li>Spring Boot Devtools
    <ul>
      <li>캐시 설정을 개발 환경에 맞게 변경.</li>
      <li>클래스패스에 있는 파일이 변경 될 때 마다 자동으로 재시작.
        <ul>
          <li>직접 껐다 켜는것(cold starts) 보다 빠르다.</li>
          <li>릴로딩 보다는 느리다. (JRebel같은게 아님)</li>
          <li>리스타트 하고 싶지 않은 리소스는 ? spring.devtools.restart.exclude</li>
          <li>리스타트 기능 끄려면 ? spring.devtools.restart.enabled = false</li>
        </ul>
      </li>
      <li>라이브 릴로드 ? 리스타트 했을 때 브라우저 자동 리프레시 하는 기능
        <ul>
          <li>브라우저 플러그인 설치해야 함</li>
          <li>라이브 릴로드 서버 끄려면 ? spring.devtools.liveload.enabled = false</li>
        </ul>
      </li>
      <li>글로벌 설정
        <ul>
          <li>~/.spring-boot-devtools.properties</li>
        </ul>
      </li>
      <li>리모트 애플리케이션</li>
    </ul>
  </li>
  <li>스프링 웹 MVC
    <ul>
      <li><a href="https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#spring-web">레퍼런스</a></li>
      <li>스프링 부트 MVC
        <ul>
          <li>자동 설정으로 제공하는 여러 기본 기능(앞으로 살펴볼 예정)</li>
        </ul>
      </li>
      <li>스프링 MVC 확장
        <ul>
          <li>@Configuration + WebMvcConfigurer</li>
        </ul>
      </li>
      <li>스프링 MVC 재정의
        <ul>
          <li>@Configuration + @EnableWebMvc</li>
        </ul>
      </li>
      <li>HttpMessageConverters
        <ul>
          <li>HTTP 요청 본문을 객체로 변경하거나, 객체를 HTTP 응답 본문으로 변경 할 때 사용
            <ul>
              <li>{“username”:”dongchul”, “password”:”123”} &lt;-&gt; User
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4</pre></td><td class="code"><pre class="highlight"><code>  <span class="nd">@PostMapping</span><span class="o">(</span><span class="s">"/user"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">User</span> <span class="nf">create</span><span class="o">(</span><span class="nd">@RequestBody</span> <span class="n">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">user</span><span class="o">;</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
          <li>스프링 부트
            <ul>
              <li>뷰 리졸버 설정 제공</li>
              <li>HttpMessageConvertersAutoConfiguration</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>정적 리소스 매핑 “/**”
        <ul>
          <li>기본 리소스 위치
            <ul>
              <li>classpath:/static</li>
              <li>classpath:/public</li>
              <li>classpath:/resources/</li>
              <li>classpath:/META-INF/resources</li>
              <li>예) “/hello.html” =&gt; static/hello.html</li>
              <li>spring.mvc.static-path-pattern: 매핑 설정 변경 가능</li>
              <li>spring.mvc-static-locations: 리소스 찾을 위치 변경 가능</li>
            </ul>
          </li>
          <li>Last-Modified 헤더를 보고 304 응답을 보냄</li>
          <li>ResourceHttpRequestHandler가 처리
            <ul>
              <li>WebMvcConfigurer의 addResourceHandlers로 커스터마이징 가능</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>웹 JAR 맵핑 “/webjars/*”
        <ul>
          <li>버전 생략 하고 사용하려면 webjars-locator-core 의존성 추가</li>
        </ul>
      </li>
      <li>웰컴 페이지
        <ul>
          <li>index.html 찾아보고 있으면 제공</li>
          <li>index.템플릿 찾아보고 있으면 제공</li>
          <li>둘다 없으면 에러페이지 노출</li>
        </ul>
      </li>
      <li>파비콘
        <ul>
          <li>favicon.ico 파일을 static 폴더 하위에 제공</li>
          <li>파비콘 만들기 <a href="https://favicon.io">파비콘</a></li>
        </ul>
      </li>
      <li>템플릿 엔진
        <ul>
          <li>스프링 부트가 자동설정을 지원하는 템플릿 엔진
            <ul>
              <li>FreeMarker</li>
              <li>Groovy</li>
              <li>Thymeleaf</li>
              <li>Mustache</li>
            </ul>
          </li>
          <li>JSP를 권장하지 않는 이유
            <ul>
              <li>JAR 패키징 할 때는 동작하지 않고 WAR 패키징 해야함.</li>
              <li>Undertow는 JSP를 지원하지 않음.</li>
            </ul>
          </li>
          <li>Thymeleaf 사용하기
            <ul>
              <li>https://www.thymeleaf.org</li>
              <li>https://www.thymeleaf.org/doc/articles/standarddialect5minutes.html</li>
              <li>의존성 추가 : spring-boot-starter-thymeleaf</li>
              <li>템플릿 파일 위치 : /src/main/resources/template</li>
              <li>예제 : https://github.com/thymeleaf/thymeleafexamples-stsm/blob/3.0-master/src/main/webapp/WEB-INF/templates/seedstartermng.html</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>HTML 템블릿 뷰 테스트를 보다 전문적으로 하자.
        <ul>
          <li>http://htmlunit.sourceforge.net/</li>
          <li>http://htmlunit.sourceforge.net/gettingStarted.html</li>
          <li>의존성 추가</li>
          <li>@Autowired WebClient</li>
        </ul>
      </li>
      <li>ExceptionHandler
        <ul>
          <li>스프링 @MVC 예외 처리 방법
            <ul>
              <li>@ControllerAdvice</li>
              <li>@ExceptionHanlder
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8</pre></td><td class="code"><pre class="highlight"><code>  <span class="nd">@ExceptionHandler</span><span class="o">(</span><span class="n">SampleException</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
  <span class="kd">public</span> <span class="nd">@ResponseBody</span> <span class="n">AppError</span> <span class="nf">sampleError</span><span class="o">(</span><span class="n">SampleException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">AppError</span> <span class="n">appError</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AppError</span><span class="o">();</span>
      <span class="n">appError</span><span class="o">.</span><span class="na">setMessage</span><span class="o">(</span><span class="s">"error.app.key"</span><span class="o">);</span>
      <span class="n">appError</span><span class="o">.</span><span class="na">setReason</span><span class="o">(</span><span class="s">"IDK"</span><span class="o">);</span>
      <span class="k">return</span> <span class="n">appError</span><span class="o">;</span>

  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
          <li>스프링 부트가 제공하는 기본 예외 처리기
            <ul>
              <li>BasicErrorController
                <ul>
                  <li>HTML 과 JSON 응답 지원</li>
                </ul>
              </li>
              <li>커스터마이징 방법
                <ul>
                  <li>ErrorController 구현</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>커스텀 에러 페이지
            <ul>
              <li>상태 코드 값에 따라 에러 페이지 보여주기</li>
              <li>src/main/resources/static/error/</li>
              <li>404.html</li>
              <li>5xx.html</li>
              <li>ErrorViewResolver 구현</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Spring HATEOAS
<code class="highlighter-rouge">Hypermedia As The Engine Of Application State</code>
        <ul>
          <li>서버 : 현재 리소스와 연관된 링크 정보를 클라이언트에게 제공한다.</li>
          <li>클라이언트 : 연관된 링크 정보를 바탕으로 리소스에 접근한다.</li>
          <li>연관된 링크 정보
            <ul>
              <li>Relation</li>
              <li>Hypertext Reference</li>
            </ul>
          </li>
          <li>spring-boot-starter-hateoas 의존성 추가</li>
          <li>https://spring.io/understanding/HATEOAS</li>
          <li>https://spring.io/guides/gs/rest-hateoas/</li>
          <li>https://docs.spring.io/spring-hateoas/docs/current/reference/html/</li>
          <li>ObjectMapper 제공
            <ul>
              <li>커스터마이징
                <ul>
                  <li>property에 spring.jackson.* 값 변환하는 방식 추천</li>
                </ul>
              </li>
              <li>Jackson2ObjectMapperBuilder</li>
            </ul>
          </li>
          <li>LinkDiscovers 제공
            <ul>
              <li>
                <p>클라이언트 쪽에서 링크 정보를 Rel 이름으로 찾을 때 사용할 수 있는 XPath 확장 클래스
```java
public class Hello extends RepresentationModel {
  private String prefix;</p>

                <p>private String name;
  …
}</p>
              </li>
            </ul>

            <p>public Hello hello() {
    Hello hello = new Hello();
    hello.setName(“dongchul”);
    hello.setPrefix(“Hey, “);</p>

            <div class="highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2</pre></td><td class="code"><pre class="highlight"><code>hello.add(linkTo(SampleController.class).withSelfRel());
return hello; } ```
</code></pre></td></tr></tbody></table></div>            </div>
          </li>
        </ul>
      </li>
      <li>CORS
        <ul>
          <li>SOP와 CORS
            <ul>
              <li>Single-Origin Policy</li>
              <li>Cross-Origin Resource Sharing</li>
              <li>Origin ?
                <ul>
                  <li>URI 스키마 (http, https)</li>
                  <li>hostname (localhost…)</li>
                  <li>포트 (8080, 18080)</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>스프링 MVC @CrossOrigin
            <ul>
              <li>https://docs.spring.io/spring/docs/5.0.7.RELEASE/spring-framework-reference/web.html#mvc-cors</li>
              <li>@Controller나 @RequestMapping에 추가 하거나
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5</pre></td><td class="code"><pre class="highlight"><code>  <span class="nd">@CrossOrigin</span><span class="o">(</span><span class="n">origins</span> <span class="o">=</span> <span class="s">"http://localhost:18080"</span><span class="o">)</span>
  <span class="nd">@GetMapping</span><span class="o">(</span><span class="s">"/hello"</span><span class="o">)</span>
  <span class="kd">public</span> <span class="n">Hello</span> <span class="nf">hello</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">Hello</span> <span class="n">hello</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Hello</span><span class="o">();</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
              <li>WebMvcConfigurer 사용해서 글로벌 설정
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5</pre></td><td class="code"><pre class="highlight"><code>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCorsMappings</span><span class="o">(</span><span class="n">CorsRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">registry</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">"/**"</span><span class="o">)</span>
              <span class="o">.</span><span class="na">allowedOrigins</span><span class="o">(</span><span class="s">"htt://localhost:18080"</span><span class="o">);</span>
  <span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>스프링 데이터
    <ul>
      <li>인메모리 데이터베이스
        <ul>
          <li>지원하는 인-메모리 데이터베이스
            <ul>
              <li>H2 (추천, 콘솔때문에)</li>
              <li>HSQL</li>
              <li>Derby</li>
            </ul>
          </li>
          <li>Spring-JDBC가 클래스패스에 있으면 자동 설정이 필요한 빈을 설정 해준다.
            <ul>
              <li>DataSource</li>
              <li>JdbcTemplate</li>
            </ul>
          </li>
          <li>인-메모리 데이터베이스 기본 연결 정보 확인 하는 방법
            <ul>
              <li>URL : “testdb”</li>
              <li>username : “sa”</li>
              <li>password : “”</li>
            </ul>
          </li>
          <li>H2 콘솔 사용하는 방법
            <ul>
              <li>spring-boot-devtools를 추가 하거나</li>
              <li>spring.h2.console.enabled=true 추가</li>
              <li>/h2-console로 접속 (path변경 가능)</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>MySQL
        <ul>
          <li>지원하는 DBCP
            <ol>
              <li>HikariCP (기본)
                <ul>
                  <li>https://github.com/brettwooldridge/HikariCP#frequently-used</li>
                </ul>
              </li>
              <li>Tomcat CP</li>
              <li>Commonc DBCP2</li>
            </ol>
          </li>
          <li>DBCP 설정
            <ul>
              <li>spring.datasource.hikari.*</li>
              <li>spring.datasource.tomcat.*</li>
              <li>spring.datasource.dbcp2.*</li>
            </ul>
          </li>
          <li>MySQL 라이센스 (GPL) 주의
            <ul>
              <li>MySQL 대신 MariaDB 사용 검토</li>
              <li>소스 코드 공개 의무 여부 확인</li>
            </ul>
          </li>
          <li>MySQL 접속시 에러
            <ul>
              <li>MySQL 5.* 최신 버전 사용할 때 문제
                <ul>
                  <li><code class="highlighter-rouge">Sat Jul 21 11:17:59 PDT 2018 WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.</code></li>
                </ul>
              </li>
              <li>해결
                <ul>
                  <li>jdbc:mysql:/localhost:3306/springboot?useSSL=false</li>
                </ul>
              </li>
              <li>MySQL 8.* 최신 버전 사용할 때 문제
                <ul>
                  <li>com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Public Key Retrieval is not allowed</li>
                </ul>
              </li>
              <li>해결
                <ul>
                  <li>jdbc:mysql:/localhost:3306/springboot?useSSL=false&amp;allowPublicKeyRetrieval=true</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>PostgreSQL
        <ul>
          <li>Mysql 과는 달리 라이센스 문제가 없다. 가장 추천하는 DB</li>
        </ul>
      </li>
      <li>Spring-Data-JPA
        <ul>
          <li>ORM(Object-Relational Mapping)과 JPA (Java Persistence API)
            <ul>
              <li>객체와 릴레이션을 맵핑할 때 발생하는 개념적 불일치를 해결하는 프레임워크</li>
              <li>http://hibernate.org/what-is-an-orm</li>
              <li>JPA: ORM을 위한 자바(EE) 표준</li>
            </ul>
          </li>
          <li>스프링 데이터 JPA
            <ul>
              <li>Repository 빈 자동 생성</li>
              <li>쿼리 메소드 자동 구현</li>
              <li>@EnableJpaRepositories (스프링 부트가 자동으로 설정 해줌.)</li>
            </ul>
          </li>
          <li>스프링 데이터 JPA 사용하기
            <ul>
              <li>@Entity 클래스 만들기</li>
              <li>Repository 만들기</li>
            </ul>
          </li>
          <li>스프링 데이터 리파지토리 테스트 만들기
            <ul>
              <li>H2 DB를 테스트 의존성에 추가하기</li>
              <li>@DataJpaTest (슬라이스 테스트) 작성
                <ul>
                  <li>테스트를 실행할 때는 Inmemory DB를 사용하는것을 추천.
                    <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14</pre></td><td class="code"><pre class="highlight"><code><span class="nd">@RunWith</span><span class="o">(</span><span class="n">SpringRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@DataJpaTest</span> <span class="c1">// 슬라이싱 테스트 DataSource, JdbcTemplate, Repository 등을 주입 받는다. 인메모리 데이터 베이스가 반드시 필요함</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AccountRepositoryTest</span> <span class="o">{</span>
    <span class="nd">@Autowired</span>
    <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="n">AccountRepository</span> <span class="n">accountRepository</span><span class="o">;</span>

    <span class="o">...</span>
<span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>JPA를 사용한 데이터베이스 초기화
            <ul>
              <li>spring.jpa.hibernate.dll.auto
                <ul>
                  <li>create</li>
                  <li>create-drop</li>
                  <li>update</li>
                  <li>validate</li>
                </ul>
              </li>
              <li>spring.jpa.generate-dll=true로 설정 해줘야 한다.</li>
            </ul>
          </li>
          <li>SQL 스크립트를 사용한 데이터베이스 초기화
            <ul>
              <li>schema.sql 또는 schema-${platform}.sql</li>
              <li>data.sql 또는 data-${platform}.sql</li>
              <li>${platform} 값은 spring.datasource.platform으로 설정 가능.</li>
            </ul>
          </li>
          <li>데이터베이스 마이그레이션 툴
            <ul>
              <li>Flyway 와 Liquibase가 대표적, Flyway 사용</li>
              <li>https://docs.spring.io/spring-boot/docs/2.0.3.RELEASE/reference/htmlsingle/#howto-execute-flyway-database-migrations-on-startup</li>
              <li>의존성 추가
                <ul>
                  <li>org.flywaydb:flyway-core</li>
                </ul>
              </li>
              <li>마이그레이션 디렉토리
                <ul>
                  <li>/resource/db/migration 또는 db/migration/{vendor}</li>
                  <li>spring.flyway.location으로 변경 가능</li>
                </ul>
              </li>
              <li>마이그레이션 파일 이름
                <ul>
                  <li>한번 적용이 된 파일은 절대 수정하면 안되고 새로운 파일을 만들어서 버전을 올려야 한다.</li>
                  <li>V숫자__이름.sql</li>
                  <li>V는 꼭 대문자</li>
                  <li>숫자는 순차적으로 (타임스템프 권장)</li>
                  <li>숫자와 이름 사이에 언더바 두개</li>
                  <li>이름은 가능한 서술적으로</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>Redis
            <ul>
              <li>캐시, 메시지 브로커, 키/벨류 스토어 등으로 사용 가능</li>
              <li>의존성 추가
                <ul>
                  <li>spring-boot-starter-data-redis</li>
                </ul>
              </li>
              <li>스프링 데이터 Redis
                <ul>
                  <li>https://projects.spring.io/spring-data-redis/</li>
                  <li>StringRedisTemplate 또는 RedisTemplate</li>
                  <li>extends CrudRepository</li>
                </ul>
              </li>
              <li>Redis 주요 커맨드
                <ul>
                  <li>https://redis.io/commands</li>
                  <li>keys *</li>
                  <li>get {key}</li>
                  <li>hgetall {key}</li>
                  <li>hget {key} {column}</li>
                </ul>
              </li>
              <li>커스터마이징
                <ul>
                  <li>spring.redis.*</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>MongoDB
            <ul>
              <li>스프링 데이터 몽고 DB
                <ul>
                  <li>Mongotemplate</li>
                  <li>MongoRepository</li>
                  <li>내장형 MongoDB (테스트용)
                    <ul>
                      <li>de.flapdoodle.embed:de.flapdoodle.embed.mongo</li>
                    </ul>
                  </li>
                  <li>@DataMongoTest</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>Neo4J
            <ul>
              <li>Neo4j는 노드간의 연관 관계를 영속화 하는데 유리한 그래프 데이터베이스</li>
              <li>스프링 데이터 Neo4J
                <ul>
                  <li>Neo4jTemplate (Deprecated)</li>
                  <li>SessionFactory</li>
                  <li>Neo4jRepository</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>스프링 시큐리티
        <ul>
          <li>웹 시큐리티</li>
          <li>메소드 시큐리티</li>
          <li>다양한 인증 방법 지원
            <ul>
              <li>LDAP, 폼 인증, Basic 인증, OAuth, …</li>
            </ul>
          </li>
          <li>스프링 부트 시큐리티 자동 설정
            <ul>
              <li>SecurityAutoConfiguration</li>
              <li>UserDetailServiceAutoConfiguration</li>
              <li>spring-boot-starter-secutiry
                <ul>
                  <li>스프링 시큐리티 5.* 의존성 추가</li>
                </ul>
              </li>
              <li>모든 요청에 인증이 필요함</li>
              <li>기본 사용자 생성
                <ul>
                  <li>Username : user</li>
                  <li>Password : 애플리케이션을 실행 할 때 마다 랜덤 값 생성 (콘솔 출력)</li>
                  <li>spring.security.user.name</li>
                  <li>spring.security.user.password</li>
                </ul>
              </li>
              <li>인증 관련 각종 이벤트 발생
                <ul>
                  <li>DefaultAuthenticationEventPublisher 빈 등록</li>
                  <li>다양한 인증 에러 핸들러 등록 가능</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>UserDetailsService 구현
            <ul>
              <li>https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#jc-authentication-userdetailsservice</li>
              <li>UserDetails 를 구현한 기본 구현체(User)를 Spring Security에서 제공해준다.
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19<br/>20<br/>21<br/>22<br/>23<br/>24<br/>25<br/>26<br/>27<br/>28</pre></td><td class="code"><pre class="highlight"><code><span class="nd">@Service</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SecutiryAccountService</span> <span class="kd">implements</span> <span class="n">UserDetailsService</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">PasswordEncoder</span> <span class="n">passwordEncoder</span><span class="o">;</span>

    <span class="nd">@Autowired</span>
    <span class="kd">private</span> <span class="n">SecurityAccountRepository</span> <span class="n">securityAccountRepository</span><span class="o">;</span>

    <span class="kd">public</span> <span class="n">SecurityAccount</span> <span class="nf">createAccount</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">SecurityAccount</span> <span class="n">securityAccount</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecurityAccount</span><span class="o">();</span>
        <span class="n">securityAccount</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="n">securityAccount</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">passwordEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">password</span><span class="o">));</span>
        <span class="k">return</span> <span class="n">securityAccountRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">securityAccount</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">UserDetails</span> <span class="nf">loadUserByUsername</span><span class="o">(</span><span class="n">String</span> <span class="n">username</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">UsernameNotFoundException</span> <span class="o">{</span>
        <span class="n">Optional</span><span class="o">&lt;</span><span class="n">SecurityAccount</span><span class="o">&gt;</span> <span class="n">byUserName</span> <span class="o">=</span> <span class="n">securityAccountRepository</span><span class="o">.</span><span class="na">findByUserName</span><span class="o">(</span><span class="n">username</span><span class="o">);</span>
        <span class="n">SecurityAccount</span> <span class="n">securityAccount</span> <span class="o">=</span> <span class="n">byUserName</span><span class="o">.</span><span class="na">orElseThrow</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">UsernameNotFoundException</span><span class="o">(</span><span class="n">username</span><span class="o">));</span>

        <span class="k">return</span> <span class="k">new</span> <span class="nf">User</span><span class="o">(</span><span class="n">securityAccount</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span> <span class="n">securityAccount</span><span class="o">.</span><span class="na">getPassword</span><span class="o">(),</span> <span class="n">authorites</span><span class="o">());</span> <span class="c1">// UserDetails 를 구현한 기본 구현체를 Spring Security에서 제공해준다.</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">GrantedAuthority</span><span class="o">&gt;</span> <span class="nf">authorites</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="k">new</span> <span class="n">SimpleGrantedAuthority</span><span class="o">(</span><span class="s">"ROLE_USER"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
          <li>PasswordEncoder 설정 및 사용
            <ul>
              <li>https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#core-services-password-encoding
                <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6</pre></td><td class="code"><pre class="highlight"><code><span class="c1">// Noop : 사용해서는 안되는 방법. 아무 인코딩 / 디코딩을 하지 않는 방법</span>
<span class="nd">@Bean</span>
<span class="kd">public</span> <span class="n">PasswordEncoder</span> <span class="nf">passwordEncoder</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">//return NoOpPasswordEncoder.getInstance();</span>
    <span class="k">return</span> <span class="n">PasswordEncoderFactories</span><span class="o">.</span><span class="na">createDelegatingPasswordEncoder</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                </div>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>RestTemplate 과 WebClient
    <ul>
      <li>RestTemplate
        <ul>
          <li>Blocking I/O 기반의 Synchronous API</li>
          <li>RestTemplateAutoConfiguration</li>
          <li>프로젝트에 spring-web 모듈이 있다면 RestTemplateBuilder를 빈으로 등록해준다.</li>
          <li>https://docs.spring.io/spring/docs/current/spring-framework-reference/integration.html#rest-client-access</li>
          <li>기본적으로 java.net.HttpURLConnection 사용</li>
          <li>커스터마이징
            <ul>
              <li>로컬 커스터마이징</li>
              <li>글로벌 커스터마이징
                <ul>
                  <li>RestTemplateCustomizer</li>
                  <li>빈 재정의</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
      <li>WebClient
        <ul>
          <li>Non-Blocking I/O 기반의 Asynchronous API</li>
          <li>WebClientAutoConfiguration</li>
          <li>프로젝트에 spring-webflux 모듈이 있다면 WebClient.Builder를 빈으로 등록해준다.</li>
          <li>https://docs.spring.io/spring/docs/current/spring-framework-reference/web-reactive.html#webflux-client</li>
          <li>기본적으로 Reactor Netty의 HTTP 클라이언트 사용</li>
          <li>커스터마이징
            <ul>
              <li>로컬 커스터마이징</li>
              <li>글로벌 커스터마이징
                <ul>
                  <li>WebClientCustomizer</li>
                  <li>빈 재정의
                    <div class="language-java highlighter-rouge"><div class="highlight"><table style="margin: 0px"><tbody><tr><td class="gutter"><pre>1<br/>2<br/>3<br/>4<br/>5<br/>6<br/>7<br/>8<br/>9<br/>10<br/>11<br/>12<br/>13<br/>14<br/>15<br/>16<br/>17<br/>18<br/>19<br/>20<br/>21<br/>22<br/>23<br/>24<br/>25<br/>26<br/>27<br/>28<br/>29<br/>30<br/>31<br/>32<br/>33<br/>34<br/>35<br/>36<br/>37<br/>38<br/>39<br/>40<br/>41<br/>42<br/>43<br/>44<br/>45<br/>46<br/>47<br/>48<br/>49<br/>50<br/>51<br/>52<br/>53</pre></td><td class="code"><pre class="highlight"><code><span class="nd">@Component</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">RestRunner</span> <span class="kd">implements</span> <span class="n">ApplicationRunner</span> <span class="o">{</span>

<span class="nd">@Autowired</span>
<span class="n">RestTemplateBuilder</span> <span class="n">restTemplateBuilder</span><span class="o">;</span>

<span class="nd">@Autowired</span>
<span class="n">WebClient</span><span class="o">.</span><span class="na">Builder</span> <span class="n">builder</span><span class="o">;</span>

<span class="nd">@Override</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="n">ApplicationArguments</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

    <span class="n">RestTemplate</span> <span class="n">restTemplate</span> <span class="o">=</span> <span class="n">restTemplateBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="n">WebClient</span> <span class="n">webClient</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>

    <span class="n">StopWatch</span> <span class="n">stopWatch</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StopWatch</span><span class="o">();</span>
    <span class="n">stopWatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

    <span class="n">String</span> <span class="n">helloResult</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s">"http://localhost:8080/hello"</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">helloResult</span><span class="o">);</span>

    <span class="n">String</span> <span class="n">worldResult</span> <span class="o">=</span> <span class="n">restTemplate</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="s">"http://localhost:8080/world"</span><span class="o">,</span> <span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">worldResult</span><span class="o">);</span>

    <span class="n">Mono</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">helloMono</span> <span class="o">=</span> <span class="n">webClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">"http://localhost:8080/hello"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="c1">//subscribe 시 실제로 요청을 보내게 되며 non blocking 으로 동작 한다.</span>
    <span class="n">helloMono</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">stopWatch</span><span class="o">.</span><span class="na">isRunning</span><span class="o">())</span>
            <span class="n">stopWatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stopWatch</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">());</span>
        <span class="n">stopWatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">});</span>

    <span class="n">Mono</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">worldMono</span> <span class="o">=</span> <span class="n">webClient</span><span class="o">.</span><span class="na">get</span><span class="o">().</span><span class="na">uri</span><span class="o">(</span><span class="s">"http://localhost:8080/world"</span><span class="o">)</span>
            <span class="o">.</span><span class="na">retrieve</span><span class="o">()</span>
            <span class="o">.</span><span class="na">bodyToMono</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">worldMono</span><span class="o">.</span><span class="na">subscribe</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(</span><span class="n">stopWatch</span><span class="o">.</span><span class="na">isRunning</span><span class="o">())</span>
            <span class="n">stopWatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>

        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stopWatch</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">());</span>
        <span class="n">stopWatch</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">});</span>

    <span class="n">stopWatch</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">stopWatch</span><span class="o">.</span><span class="na">prettyPrint</span><span class="o">());</span>
<span class="o">}</span>
<span class="o">}</span>
</code></pre></td></tr></tbody></table></div>                    </div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>스프링 부트 운영
    <ul>
      <li>스프링 부트 Actuator
        <ul>
          <li>의존성
            <ul>
              <li>spring-boot-starter-actuator</li>
            </ul>
          </li>
          <li>애플리케이션의 각종 정보를 확인 할 수 있는 Endpoints
            <ul>
              <li>다양한 Endpoints 제공</li>
              <li>JMX 또는 HTTP를 통해 접근 가능 함</li>
              <li>shutdown을 제외한 모든 Endpoint는 기본적으로 활성화 상태</li>
              <li>활성화 옵션 조정
                <ul>
                  <li>management.endpoints.enabled-by-default=false</li>
                  <li>management.endpoint.info.enabled=true</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>JConsole 사용하기
            <ul>
              <li>https://docs.oracle.com/javase/tutorial/jmx/mbeans/</li>
              <li>https://docs.oracle.com/javase/7/docs/technotes/guides/management/jconsole.html</li>
            </ul>
          </li>
          <li>VisualVM 사용하기
            <ul>
              <li>https://visualvm.github.io/download.html</li>
              <li>java 10이상은 포함되어 있지 않다.</li>
              <li>jconsole보다 확인하기 편하다</li>
            </ul>
          </li>
          <li>HTTP 사용하기
            <ul>
              <li>/acturator</li>
              <li>health와 info를 제외한 대부분의 Endpoint가 기본적으로 비공개 상태</li>
              <li>공개 옵션 조정
                <ul>
                  <li>management.endpoints.web.expose.include=*</li>
                  <li>management.endpoints.web.expose.exclude=env,beans</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>스프링 부트 어드민
            <ul>
              <li>https://github.com/codecentric/spring-boot-admin 스프링 부트 Actuator UI 제공</li>
              <li>어드민 서버 설정
                <ul>
                  <li>@EnableAdminServer</li>
                  <li>spring-boot-admin-starter-server 의존성 필요</li>
                </ul>
              </li>
              <li>클라이언트 설정
                <ul>
                  <li>spring-boot-admin-starter-client 의존성 필요</li>
                  <li>spring.boot.admin.client.url=http://localhost:8080(어드민 서버 주소)</li>
                  <li>management.endpoints.web.exposure.include=*</li>
                </ul>
              </li>
              <li>운영중에도 로그 레벨 변경 가능</li>
              <li>스프링 시큐리티를 반드시 설정 해야 한다.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            
            <a href="/tag/#/Java" rel="tag"># Java</a>
          
            
            <a href="/tag/#/Spring" rel="tag"># Spring</a>
          
        </div>
      

      
      
      
      
      

      
      
        <div class="post-nav" id="post-nav-id">
          <div class="post-nav-next post-nav-item">
            
              <a href="/dev/2020/06/17/azure-api-managerment-service/" rel="next" title="Azure API Management Service 활용법">
                <i class="fa fa-chevron-left"></i> Azure API Management Service 활용법
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/dev/2020/06/05/spring-framework/" rel="prev" title="스프링 프레임워크 핵심 정리">
                스프링 프레임워크 핵심 정리 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
      

      
    </footer>
  </article>

  <div class="post-spread">
    
  </div>
</div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          

  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        
        
        







      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            목차
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            흝어보기
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/images/avatar.gif"
               alt="DongChul Lee" />
          <p class="site-author-name" itemprop="name">DongChul Lee</p>
           
              <p class="site-description motion-element" itemprop="description">사내 공유, 개인의 경험을 기록하는 블로그입니다.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">22</span>
                <span class="site-state-item-name">포스트</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">카테고리</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">태그</span>
              </a>
            </div>
          

        </nav>

        
        
        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              
              
              <span class="links-of-author-item">
                <a href="https://github.com/sah3122" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            








            
              <div class="post-toc-content">
    <ol class=nav>
      <li class="nav-item nav-level-2"> <a class="nav-link" href="#스프링-부트-원리"> <span class="nav-number">1</span> <span class="nav-text">스프링 부트 원리</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#스프링-부트-활용"> <span class="nav-number">2</span> <span class="nav-text">스프링 부트 활용</span> </a> </li>
    </ol>
  </div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>

        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">DongChul Lee</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://jekyllrb.com">Jekyll</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/simpleyyt/jekyll-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





















  
   
  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery/index.js?v=2.1.3"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/assets/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/assets/js/src/motion.js?v=5.1.1"></script>



  
  

  <script type="text/javascript" src="/assets/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/assets/js/src/post-details.js?v=5.1.1"></script>


  


  <script type="text/javascript" src="/assets/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  











  




  

    

  







  






  

  

  
  


  

  
  <script type="text/javascript" src="/assets/js/src/js.cookie.js?v=5.1.1"></script>
  <script type="text/javascript" src="/assets/js/src/scroll-cookie.js?v=5.1.1"></script>


  

</body>
</html>

